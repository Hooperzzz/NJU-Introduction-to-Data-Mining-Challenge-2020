# NJU Introduction to Data Mining Challenge 2020

* 比赛链接：https://www.kaggle.com/c/nju-introdm20/overview

## 比赛描述

* 数据挖掘课程大作业
* 判断两个代码是否是克隆代码

## 方法简述

* 最后最高得分的方法是多个方法的结合
    1. 编译运行测试，基于相同的输入
        * 看输出是否一样
        * 看输入的数目是否一样
    2. 看测试中字符串的集合是否一样
    3. 用XGBoost训练83个决策树，用来预测是否一致
* 其中
    * 使用第一种方法线上能做到0.72
    * 第一种方法和第二种方法结合能做到0.74
    * 第三种方法对成绩没有明显提升
    * 0.76是在又改变了一下第一种方法，判断的规则后提升的
* 详细内容可见报告
    
## 关于项目

* 这个项目中一共有三种方法的实现
    * 编译运行的方法主要是executeCode.py，judgeByExe.py和compareTestCsv.py
    * LSTM的方法主要是network_part下面的文件
    * 决策树的方法主要是use_xgboost下面的方法
* 我这个项目代码放置混乱，文件和函数命名也是比较奇葩 (；´д｀)ゞ
    * 按道理编译运行方法相关的文件是要放到一个文件夹中的，但是由于以下原因，最后没有更改
        * 一开始没想那么多
        * 变量保存大量使用pickle，一旦代码位置改变就会有报错
    * 函数命名纯粹是个人懒了

## 如何运行

* 基本上每个函数运行完都会把后面需要的变量用pickle保存到文件中
* 如何获得编译运行方法所需的变量文件
    * 运行judgeByExe.py的“if \_\_name\_\_ == "\_\_main\_\_":”后面前三个函数
        * （如果要连续运行，注意保持参数中的文件路径保持一致）
* 如何获得LSTM方法所需的变量文件：
    * 运行network_part/UseNetwork.py的“if \_\_name\_\_ == "\_\_main\_\_":”后面的函数
        * LSTM有两种结构，要使用那种结构，把对应部分的函数解除注释
        * （如果要连续运行，注意保持参数中的文件路径保持一致）
        * （这个方法运行非常慢，而且效果也不好）
* 如何运行决策树方法所需的变量文件：
    * 运行use_xgboost/network.py的“if \_\_name\_\_ == "\_\_main\_\_":”后面的函数
        * （如果要连续运行，注意保持参数中的文件路径保持一致）
* 如何获得最后的答案：
    * 选择getAnsCsv.py的“if \_\_name\_\_ == "\_\_main\_\_":”后面的函数
        * 挑选一个函数运行就好
        * 函数能运行的前提是，所需的变量文件均已获得（通过前面的方法获得）
        * 通过改变文件头部的compare_test，可以改变比较两个代码编译运行结果判断比较的方法
            * 如“from compareTestCsv import compare_test6 as compare_test”

## 最后效果

* 最后线上得分0.76572
    * 分数是按F1 Score来计算
    * 位列第三名
        * 第一名和第二名分数分别为0.78042和0.76656